---
title: 使用示例集合
description: Antigravity Agent 常见使用场景和最佳实践
category: user-guide
language: zh-CN
version: 1.0.3
lastUpdated: 2025-12-04
tags: [示例, 最佳实践, 使用场景]
---

# 使用示例集合

## 概述

本文档提供 Antigravity Agent 的实际使用示例，涵盖多账户管理、配置备份、批量操作和故障排查等常见场景。通过这些示例，您可以快速掌握应用程序的高级用法和最佳实践。

## 目录

- [多账户管理场景](#多账户管理场景)
- [配置备份和恢复](#配置备份和恢复)
- [批量操作示例](#批量操作示例)
- [故障排查示例](#故障排查示例)
- [最佳实践建议](#最佳实践建议)

## 多账户管理场景

### 场景 1: 工作和个人账户分离

**使用场景：**
您有一个工作账户和一个个人账户，需要在不同时间使用不同的账户进行开发工作。

**操作步骤：**

1. **首次设置工作账户**
   ```
   1. 在 Antigravity 中登录您的工作账户
   2. 打开 Antigravity Agent
   3. 应用会自动检测并备份工作账户
   4. 在用户列表中看到工作账户（如 work@company.com）
   ```

2. **添加个人账户**
   ```
   1. 点击顶部工具栏的"登录新账户"按钮
   2. 在确认对话框中点击"确认"
   3. 等待应用自动备份当前账户并重启 Antigravity
   4. 在 Antigravity 中登录您的个人账户
   5. 个人账户会自动被检测并添加到列表
   ```

3. **日常切换**
   ```
   上班时：
   - 打开 Antigravity Agent
   - 找到工作账户卡片
   - 点击"切换"按钮
   - 等待几秒，切换完成
   
   下班后：
   - 找到个人账户卡片
   - 点击"切换"按钮
   - 立即开始使用个人账户
   ```

**预期结果：**
- 两个账户的配置完全独立
- 切换过程无需手动输入任何信息
- 每个账户的 API 配额独立计算
- 切换后 Antigravity 立即使用新账户

**提示：**
- 可以为账户添加备注（如"工作"、"个人"）便于识别
- 使用配额仪表盘监控当前账户的使用情况
- 建议定期导出配置作为备份

### 场景 2: 多客户项目管理

**使用场景：**
您是自由职业者或咨询顾问，为多个客户提供服务，每个客户使用独立的 Antigravity 账户。

**操作步骤：**

1. **为每个客户设置账户**
   ```
   客户 A:
   1. 登录客户 A 提供的 Antigravity 账户
   2. Antigravity Agent 自动备份为 "clientA@example.com"
   
   客户 B:
   1. 使用"登录新账户"功能
   2. 登录客户 B 的账户
   3. 自动备份为 "clientB@example.com"
   
   重复此过程添加更多客户账户
   ```

2. **项目工作时快速切换**
   ```
   开始客户 A 的项目：
   - 切换到 clientA@example.com
   - 查看配额仪表盘，确认可用额度
   - 开始工作
   
   切换到客户 B 的项目：
   - 点击切换到 clientB@example.com
   - 无需重启任何工具
   - 继续工作
   ```

3. **月末账单核对**
   ```
   1. 依次切换到每个客户账户
   2. 在配额仪表盘中查看使用量
   3. 记录每个模型的使用情况
   4. 生成账单报告
   ```

**最佳实践：**
- 为每个客户账户创建独立的导出备份
- 定期检查每个账户的配额使用情况
- 在账户卡片上添加客户名称备注
- 使用系统托盘功能保持应用在后台运行

### 场景 3: 开发和测试环境隔离

**使用场景：**
您需要在开发环境和生产环境使用不同的 Antigravity 账户，避免测试代码消耗生产配额。

**操作步骤：**

1. **设置开发账户**
   ```
   1. 登录开发环境专用账户 (dev@company.com)
   2. Antigravity Agent 自动备份
   3. 在此账户下进行所有开发和测试工作
   ```

2. **设置生产账户**
   ```
   1. 使用"登录新账户"添加生产账户 (prod@company.com)
   2. 仅在需要验证生产环境时使用
   ```

3. **日常开发流程**
   ```
   开发阶段：
   - 使用 dev@company.com 账户
   - 自由测试各种功能
   - 不用担心配额消耗
   
   生产部署前：
   - 切换到 prod@company.com
   - 进行最终验证
   - 确认功能正常后部署
   
   部署后：
   - 立即切换回 dev@company.com
   - 继续开发工作
   ```

**安全建议：**
- 生产账户使用更强的密码保护
- 定期导出生产账户配置并加密存储
- 限制生产账户的使用频率
- 监控生产账户的异常使用

### 场景 4: 团队协作账户共享

**使用场景：**
团队成员需要共享某些公共账户，同时保留个人账户。

**操作步骤：**

1. **设置个人账户**
   ```
   每个团队成员：
   1. 登录个人 Antigravity 账户
   2. Antigravity Agent 自动备份
   ```

2. **添加团队共享账户**
   ```
   1. 团队管理员提供共享账户凭据
   2. 使用"登录新账户"功能添加
   3. 团队账户被备份到本地
   ```

3. **使用共享账户**
   ```
   需要使用团队资源时：
   - 切换到团队共享账户
   - 完成协作任务
   - 切换回个人账户
   ```

4. **配置同步**
   ```
   方法 1: 使用导出/导入功能
   - 管理员导出团队账户配置
   - 加密并分享给团队成员
   - 成员导入配置文件
   
   方法 2: 手动配置
   - 每个成员独立添加团队账户
   - 使用相同的登录凭据
   ```

**协作建议：**
- 明确团队账户的使用规范
- 定期检查团队账户的配额使用
- 使用配额仪表盘避免超额
- 建立账户使用日志记录



## 配置备份和恢复

### 场景 5: 定期备份配置

**使用场景：**
定期创建配置备份，防止数据丢失或系统故障。

**操作步骤：**

1. **建立备份计划**
   ```
   建议备份频率：
   - 每周一次：常规使用
   - 每天一次：频繁添加/修改账户
   - 重要操作前：系统升级、大量修改前
   ```

2. **执行备份**
   ```
   1. 打开 Antigravity Agent
   2. 点击顶部工具栏的"导出"按钮
   3. 设置强密码（建议使用密码管理器生成）
   4. 选择备份保存位置：
      - 本地：D:\Backups\Antigravity\
      - 云盘：OneDrive\Backups\
      - 外部存储：移动硬盘
   5. 文件命名示例：
      antigravity_backup_2025-12-04_weekly.enc
   ```

3. **验证备份**
   ```
   1. 检查文件大小（应该 > 0 KB）
   2. 记录备份密码到密码管理器
   3. 可选：在测试环境中验证导入功能
   ```

**备份策略示例：**

```
每周备份计划：
├── 周一：完整备份到本地
├── 周三：增量备份到云盘
├── 周五：完整备份到外部存储
└── 月末：归档备份到长期存储

文件命名规范：
antigravity_[类型]_[日期]_[描述].enc

示例：
- antigravity_full_2025-12-04_weekly.enc
- antigravity_full_2025-12-31_monthly.enc
- antigravity_emergency_2025-12-04_before-upgrade.enc
```

**自动化备份脚本（可选）：**

```bash
#!/bin/bash
# backup-antigravity.sh

DATE=$(date +%Y-%m-%d)
BACKUP_DIR="$HOME/Backups/Antigravity"
FILENAME="antigravity_auto_${DATE}.enc"

# 创建备份目录
mkdir -p "$BACKUP_DIR"

# 提示：需要手动执行导出操作
echo "请在 Antigravity Agent 中执行导出操作"
echo "保存位置：$BACKUP_DIR/$FILENAME"

# 验证备份
if [ -f "$BACKUP_DIR/$FILENAME" ]; then
    echo "✓ 备份成功：$FILENAME"
    echo "文件大小：$(du -h "$BACKUP_DIR/$FILENAME" | cut -f1)"
else
    echo "✗ 备份失败或未完成"
fi
```

### 场景 6: 跨设备迁移配置

**使用场景：**
从旧电脑迁移到新电脑，或在多台设备间同步配置。

**操作步骤：**

**在旧设备上：**

1. **导出完整配置**
   ```
   1. 打开 Antigravity Agent
   2. 确保所有账户都已正确备份
   3. 点击"导出"按钮
   4. 设置强密码（务必记住！）
   5. 保存到 USB 驱动器或云盘
   6. 文件名：antigravity_migration_2025-12-04.enc
   ```

2. **验证导出**
   ```
   1. 检查文件完整性
   2. 记录密码到安全位置
   3. 可选：创建第二份备份
   ```

**在新设备上：**

1. **安装应用程序**
   ```
   1. 下载并安装 Antigravity Agent
   2. 首次启动应用
   3. 跳过初始设置向导
   ```

2. **导入配置**
   ```
   1. 点击顶部工具栏的"导入"按钮
   2. 选择之前导出的 .enc 文件
   3. 输入导出时设置的密码
   4. 等待导入完成（通常几秒钟）
   5. 验证所有账户都已恢复
   ```

3. **验证迁移**
   ```
   检查清单：
   ☑ 所有账户都显示在列表中
   ☑ 账户信息完整（邮箱、用户名、头像）
   ☑ 可以成功切换账户
   ☑ 配额信息正确显示
   ☑ 应用设置已恢复（系统托盘、静默启动等）
   ```

**跨平台迁移注意事项：**

```
Windows → macOS:
- 配置文件完全兼容
- 路径会自动适配
- 系统托盘行为可能略有不同

macOS → Windows:
- 配置文件完全兼容
- 需要安装 WebView2 Runtime
- 检查 Antigravity 可执行文件路径

Windows → Linux (未来):
- 配置文件完全兼容
- 需要安装依赖包
- 检查文件权限
```

### 场景 7: 灾难恢复

**使用场景：**
系统崩溃、硬盘故障或意外删除后恢复配置。

**操作步骤：**

1. **评估损失**
   ```
   检查项：
   - 应用程序是否可以启动？
   - 配置文件是否存在？
   - 数据库文件是否损坏？
   - 是否有可用的备份？
   ```

2. **从备份恢复**
   ```
   情况 A：有最近的导出备份
   1. 重新安装 Antigravity Agent
   2. 使用"导入"功能恢复配置
   3. 验证所有账户
   
   情况 B：只有旧备份
   1. 导入旧备份
   2. 手动添加新增的账户
   3. 更新账户信息
   
   情况 C：没有备份
   1. 重新安装应用
   2. 逐个重新登录账户
   3. 应用会自动重新备份
   ```

3. **恢复后验证**
   ```
   完整性检查：
   1. 测试账户切换功能
   2. 验证 API 密钥有效性
   3. 检查配额信息
   4. 测试导入导出功能
   5. 立即创建新备份
   ```

**预防措施：**

```
多重备份策略：
1. 本地备份：每周自动备份到本地磁盘
2. 云端备份：每月备份到云存储（OneDrive/Google Drive）
3. 离线备份：季度备份到外部硬盘
4. 关键时刻备份：重大操作前手动备份

备份验证：
- 定期测试恢复流程
- 在虚拟机中验证备份可用性
- 记录恢复时间和步骤
```

### 场景 8: 配置版本管理

**使用场景：**
维护多个配置版本，便于回滚和比较。

**操作步骤：**

1. **建立版本命名规范**
   ```
   格式：antigravity_v[版本号]_[日期]_[描述].enc
   
   示例：
   - antigravity_v1.0_2025-12-01_initial.enc
   - antigravity_v1.1_2025-12-04_added-work-account.enc
   - antigravity_v1.2_2025-12-10_team-accounts.enc
   - antigravity_v2.0_2025-12-15_major-reorganization.enc
   ```

2. **创建版本备份**
   ```
   重要变更时：
   1. 导出当前配置
   2. 使用版本号命名
   3. 添加变更说明文档
   4. 保存到版本控制目录
   ```

3. **版本目录结构**
   ```
   Antigravity-Backups/
   ├── v1.0/
   │   ├── antigravity_v1.0_2025-12-01.enc
   │   └── CHANGELOG.md
   ├── v1.1/
   │   ├── antigravity_v1.1_2025-12-04.enc
   │   └── CHANGELOG.md
   ├── v2.0/
   │   ├── antigravity_v2.0_2025-12-15.enc
   │   └── CHANGELOG.md
   └── current -> v2.0/  (符号链接)
   ```

4. **变更日志示例**
   ```markdown
   # Version 1.1 - 2025-12-04
   
   ## 变更内容
   - 添加工作账户 (work@company.com)
   - 更新个人账户配置
   - 启用系统托盘功能
   
   ## 账户列表
   1. personal@example.com (个人)
   2. work@company.com (工作)
   
   ## 回滚说明
   如需回滚到 v1.0，导入 antigravity_v1.0_2025-12-01.enc
   ```

**版本管理最佳实践：**
- 重大变更前创建新版本
- 保留至少 3 个历史版本
- 定期清理过期版本（保留月度快照）
- 使用 Git 管理变更日志



## 批量操作示例

### 场景 9: 批量导入多个账户

**使用场景：**
团队管理员需要为多个团队成员配置相同的账户集合。

**操作步骤：**

1. **准备主配置**
   ```
   管理员操作：
   1. 在一台设备上配置所有需要的账户
   2. 测试确保所有账户正常工作
   3. 导出配置文件
   4. 设置团队共享密码
   5. 分发配置文件给团队成员
   ```

2. **团队成员导入**
   ```
   每个成员：
   1. 安装 Antigravity Agent
   2. 获取配置文件和密码
   3. 使用"导入"功能加载配置
   4. 验证所有账户可用
   5. 根据需要添加个人账户
   ```

3. **配置文件分发方式**
   ```
   方式 1：内部文件服务器
   - 上传到公司内网
   - 设置访问权限
   - 提供下载链接
   
   方式 2：加密邮件
   - 使用加密邮件服务
   - 密码单独通过其他渠道发送
   
   方式 3：USB 驱动器
   - 复制到 USB
   - 当面交付
   - 确认接收后删除
   ```

**安全注意事项：**
- 使用强密码加密配置文件
- 密码和文件分开传输
- 接收后立即验证文件完整性
- 使用后安全删除临时文件

### 场景 10: 批量更新账户信息

**使用场景：**
多个账户的 API 密钥或配置需要同时更新。

**操作步骤：**

1. **准备更新**
   ```
   1. 导出当前配置作为备份
   2. 记录需要更新的账户列表
   3. 准备新的 API 密钥或配置信息
   ```

2. **执行更新**
   ```
   方法 1：通过 Antigravity 更新
   1. 依次切换到每个账户
   2. 在 Antigravity 中更新配置
   3. Antigravity Agent 自动同步更新
   
   方法 2：手动更新后重新备份
   1. 在 Antigravity 中批量更新
   2. 切换到每个账户触发自动备份
   3. 验证更新已保存
   ```

3. **验证更新**
   ```
   检查清单：
   ☑ 每个账户都已更新
   ☑ API 密钥有效
   ☑ 配额信息正确
   ☑ 可以正常切换
   ☑ 创建新的导出备份
   ```

**批量更新脚本示例（概念）：**

```javascript
// 注意：这是概念示例，实际需要通过 Antigravity Agent 的 UI 操作

const accountsToUpdate = [
  { email: 'account1@example.com', newApiKey: 'new-key-1' },
  { email: 'account2@example.com', newApiKey: 'new-key-2' },
  { email: 'account3@example.com', newApiKey: 'new-key-3' }
];

async function batchUpdateAccounts() {
  for (const account of accountsToUpdate) {
    console.log(`更新账户: ${account.email}`);
    
    // 1. 切换到账户
    await switchAccount(account.email);
    
    // 2. 在 Antigravity 中更新 API 密钥
    // （需要手动操作）
    
    // 3. 等待自动备份
    await waitForBackup();
    
    console.log(`✓ ${account.email} 更新完成`);
  }
  
  console.log('所有账户更新完成');
}
```

### 场景 11: 批量清理和重组

**使用场景：**
清理不再使用的账户，重新组织账户结构。

**操作步骤：**

1. **审计现有账户**
   ```
   创建账户清单：
   
   | 邮箱 | 用途 | 最后使用 | 状态 | 操作 |
   |------|------|----------|------|------|
   | work@company.com | 工作 | 2025-12-04 | 活跃 | 保留 |
   | old-work@company.com | 旧工作 | 2025-10-15 | 过期 | 删除 |
   | personal@example.com | 个人 | 2025-12-03 | 活跃 | 保留 |
   | test@example.com | 测试 | 2025-11-20 | 不用 | 删除 |
   ```

2. **导出备份（重要！）**
   ```
   1. 在清理前导出完整配置
   2. 命名：antigravity_before_cleanup_2025-12-04.enc
   3. 验证备份文件完整性
   ```

3. **执行清理**
   ```
   1. 识别要删除的账户
   2. 逐个点击删除按钮
   3. 确认删除操作
   4. 验证账户已从列表中移除
   ```

4. **重新组织**
   ```
   1. 保留的账户按用途分类
   2. 更新账户备注信息
   3. 调整显示顺序（如果支持）
   4. 导出新的配置文件
   ```

5. **清理后验证**
   ```
   ☑ 活跃账户都已保留
   ☑ 不需要的账户已删除
   ☑ 可以正常切换账户
   ☑ 创建清理后的备份
   ☑ 更新文档记录
   ```

**清理建议：**
- 每季度审查一次账户列表
- 删除 3 个月未使用的测试账户
- 保留所有生产和工作账户
- 清理前务必备份

### 场景 12: 批量配置同步

**使用场景：**
在多台设备上保持相同的账户配置。

**操作步骤：**

1. **设置主设备**
   ```
   主设备（如办公电脑）：
   1. 配置所有需要的账户
   2. 调整应用设置
   3. 导出配置文件
   4. 上传到云存储
   ```

2. **同步到其他设备**
   ```
   设备 A（笔记本）：
   1. 安装 Antigravity Agent
   2. 从云存储下载配置文件
   3. 导入配置
   4. 验证同步成功
   
   设备 B（家用电脑）：
   1. 重复相同步骤
   2. 确保所有设备配置一致
   ```

3. **保持同步**
   ```
   定期同步流程：
   
   每周一次：
   1. 在主设备上导出最新配置
   2. 上传到云存储（覆盖旧文件）
   3. 在其他设备上下载并导入
   4. 验证同步成功
   
   自动化（可选）：
   - 使用云同步工具（OneDrive/Dropbox）
   - 设置自动同步目录
   - 定期手动导入更新
   ```

4. **冲突处理**
   ```
   如果不同设备有不同的账户：
   
   方法 1：合并配置
   1. 从设备 A 导出配置
   2. 在设备 B 导入（合并模式）
   3. 从设备 B 导出完整配置
   4. 分发到所有设备
   
   方法 2：分别管理
   1. 每个设备维护独立配置
   2. 只同步共享账户
   3. 保留设备特定账户
   ```

**同步最佳实践：**
- 指定一台主设备作为配置源
- 使用版本号管理配置文件
- 同步前备份本地配置
- 记录同步日志



## 故障排查示例

### 场景 13: 账户切换失败

**问题描述：**
点击切换账户后显示错误，或切换后账户信息不正确。

**诊断步骤：**

1. **检查错误信息**
   ```
   1. 查看应用界面的错误提示
   2. 打开日志文件：
      Windows: %APPDATA%\.antigravity-agent\logs\
      macOS: ~/.config/.antigravity-agent/logs/
   3. 搜索 "ERROR" 或 "switch" 关键词
   ```

2. **常见错误和解决方案**

   **错误 1: "Database is locked"**
   ```
   原因：数据库被其他进程占用
   
   解决方案：
   1. 关闭所有 Antigravity 相关进程
      Windows: taskkill /F /IM antigravity.exe
      macOS: pkill -9 antigravity
   
   2. 删除锁文件
      Windows: del %APPDATA%\.antigravity\*.db-shm
      macOS: rm ~/.antigravity/*.db-shm
   
   3. 重启 Antigravity Agent
   4. 重试切换操作
   ```

   **错误 2: "Account data not found"**
   ```
   原因：账户备份数据损坏或丢失
   
   解决方案：
   1. 检查备份文件是否存在
   2. 如果有导出备份，尝试重新导入
   3. 如果没有备份，需要重新登录该账户
   
   步骤：
   1. 删除损坏的账户
   2. 使用"登录新账户"功能
   3. 重新登录该账户
   4. 应用会重新创建备份
   ```

   **错误 3: "Permission denied"**
   ```
   原因：没有写入权限
   
   解决方案：
   Windows:
   1. 以管理员身份运行应用
   2. 检查文件夹权限
   
   macOS:
   1. 授予完全磁盘访问权限
      系统偏好设置 -> 安全性与隐私 -> 完全磁盘访问
   2. 添加 Antigravity Agent
   ```

3. **验证修复**
   ```
   1. 尝试切换到其他账户
   2. 检查配额仪表盘是否正确显示
   3. 在 Antigravity 中验证当前账户
   4. 测试基本功能是否正常
   ```

### 场景 14: 导入配置失败

**问题描述：**
导入备份文件时显示错误，或导入后数据不完整。

**诊断步骤：**

1. **验证文件完整性**
   ```
   1. 检查文件大小（不应为 0 KB）
   2. 确认文件扩展名为 .enc
   3. 尝试用文本编辑器打开（应显示加密内容）
   ```

2. **常见问题和解决方案**

   **问题 1: "Invalid password"**
   ```
   原因：密码输入错误
   
   解决方案：
   1. 确认密码正确（注意大小写）
   2. 检查键盘布局（中英文输入法）
   3. 尝试从密码管理器复制粘贴
   4. 如果确认密码正确但仍失败：
      - 文件可能已损坏
      - 尝试使用其他备份文件
   ```

   **问题 2: "File corrupted"**
   ```
   原因：备份文件损坏
   
   解决方案：
   1. 尝试其他备份文件
   2. 如果是从云盘下载的，重新下载
   3. 检查文件传输过程是否完整
   4. 如果所有备份都损坏：
      - 需要手动重新配置账户
      - 建立更可靠的备份策略
   ```

   **问题 3: "Import succeeded but accounts missing"**
   ```
   原因：部分数据导入失败
   
   解决方案：
   1. 检查日志文件了解详细错误
   2. 尝试重新导入
   3. 如果持续失败：
      - 导出当前配置作为备份
      - 清空应用数据
      - 重新导入原始备份
   ```

3. **手动恢复步骤**
   ```
   如果自动导入失败：
   
   1. 备份当前数据
      复制整个配置目录到安全位置
   
   2. 清空应用数据
      Windows: 删除 %APPDATA%\.antigravity-agent
      macOS: 删除 ~/.config/.antigravity-agent
   
   3. 重启应用
      应用会创建新的配置目录
   
   4. 重新导入
      使用"导入"功能加载备份文件
   
   5. 验证结果
      检查所有账户是否恢复
   ```

### 场景 15: 应用启动失败

**问题描述：**
双击应用图标后没有反应，或显示错误信息。

**诊断步骤：**

1. **检查系统要求**
   ```
   Windows:
   ☑ Windows 10 或更高版本
   ☑ WebView2 Runtime 已安装
   ☑ 至少 4GB RAM
   ☑ 100MB 可用磁盘空间
   
   macOS:
   ☑ macOS 10.15 或更高版本
   ☑ 至少 4GB RAM
   ☑ 100MB 可用磁盘空间
   ```

2. **查看启动日志**
   ```
   日志位置：
   Windows: %APPDATA%\.antigravity-agent\logs\
   macOS: ~/.config/.antigravity-agent/logs/
   
   查找启动错误：
   grep "ERROR" antigravity-agent.log | head -20
   ```

3. **常见启动问题**

   **问题 1: Windows - "WebView2 not found"**
   ```
   解决方案：
   1. 下载 WebView2 Runtime
      https://developer.microsoft.com/microsoft-edge/webview2/
   
   2. 安装 Evergreen Standalone Installer
   
   3. 重启应用
   ```

   **问题 2: macOS - "App is damaged"**
   ```
   解决方案：
   1. 打开终端
   2. 运行命令：
      xattr -cr /Applications/Antigravity\ Agent.app
   
   3. 重新打开应用
   ```

   **问题 3: "Config file corrupted"**
   ```
   解决方案：
   1. 备份配置目录
   2. 删除配置文件：
      Windows: del %APPDATA%\.antigravity-agent\config.json
      macOS: rm ~/.config/.antigravity-agent/config.json
   
   3. 重启应用（会使用默认配置）
   4. 如果有备份，重新导入
   ```

4. **完全重置**
   ```
   如果所有方法都失败：
   
   1. 导出账户备份（如果可能）
   
   2. 完全卸载应用
      Windows: 
      - 控制面板 -> 卸载程序
      - 删除 %APPDATA%\.antigravity-agent
      
      macOS:
      - 删除 /Applications/Antigravity Agent.app
      - 删除 ~/.config/.antigravity-agent
   
   3. 重新安装应用
   
   4. 导入备份恢复数据
   ```

### 场景 16: 性能问题排查

**问题描述：**
应用运行缓慢、卡顿或占用过多资源。

**诊断步骤：**

1. **检查资源使用**
   ```
   Windows (任务管理器):
   1. 按 Ctrl+Shift+Esc
   2. 找到 Antigravity Agent 进程
   3. 查看 CPU、内存、磁盘使用率
   
   macOS (活动监视器):
   1. 打开活动监视器
   2. 找到 Antigravity Agent
   3. 查看 CPU、内存使用情况
   ```

2. **正常资源使用范围**
   ```
   正常情况：
   - CPU: 空闲时 < 5%，操作时 < 30%
   - 内存: 50-150 MB
   - 磁盘: 偶尔读写
   
   异常情况：
   - CPU: 持续 > 50%
   - 内存: > 300 MB
   - 磁盘: 持续高速读写
   ```

3. **性能优化步骤**

   **优化 1: 清理日志文件**
   ```
   日志文件可能占用大量空间
   
   Windows:
   cd %APPDATA%\.antigravity-agent\logs
   del /Q *.log.old
   
   macOS:
   cd ~/.config/.antigravity-agent/logs
   rm *.log.old
   
   保留最近 7 天的日志即可
   ```

   **优化 2: 优化数据库**
   ```
   使用 SQLite 命令行工具：
   
   cd ~/.config/.antigravity-agent
   sqlite3 data.db "VACUUM;"
   sqlite3 data.db "ANALYZE;"
   
   这会压缩数据库并优化查询性能
   ```

   **优化 3: 减少账户数量**
   ```
   如果有大量账户（> 20 个）：
   1. 删除不再使用的账户
   2. 导出并归档旧账户
   3. 只保留活跃账户
   ```

   **优化 4: 禁用不必要的功能**
   ```
   1. 如果不需要，禁用系统托盘
   2. 关闭自动更新检查（如果有）
   3. 减少日志级别
   ```

4. **监控性能改善**
   ```
   优化后验证：
   1. 重启应用
   2. 监控资源使用 5 分钟
   3. 测试常用操作的响应速度
   4. 记录改善情况
   ```

### 场景 17: 数据同步问题

**问题描述：**
Antigravity 中的账户变化没有被 Agent 检测到。

**诊断步骤：**

1. **检查监控状态**
   ```
   1. 确认 Antigravity 正在运行
   2. 检查 Agent 是否显示"正在监控"
   3. 查看日志中的监控记录
   ```

2. **手动触发同步**
   ```
   方法 1: 重启 Agent
   1. 关闭 Antigravity Agent
   2. 重新打开
   3. 等待自动检测
   
   方法 2: 切换账户
   1. 切换到任意账户
   2. 触发数据库更新
   3. 检查是否同步
   ```

3. **检查数据库连接**
   ```
   验证数据库文件：
   
   Windows:
   dir %APPDATA%\.antigravity\*.db
   
   macOS:
   ls -la ~/.antigravity/*.db
   
   确认文件存在且可访问
   ```

4. **解决同步问题**
   ```
   如果持续无法同步：
   
   1. 检查文件权限
      确保 Agent 有读写权限
   
   2. 检查防病毒软件
      可能阻止了文件访问
   
   3. 重新配置监控
      - 重启 Antigravity
      - 重启 Agent
      - 手动切换一次账户
   
   4. 查看详细日志
      启用 debug 日志级别
      RUST_LOG=debug ./antigravity-agent
   ```

